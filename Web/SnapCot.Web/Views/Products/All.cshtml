@model SnapCot.Web.ViewModels.ProductViewModels.AllPagedProductsViewModel
@{
    ViewBag.Title = "All";
}

@section customstyles{
    @Styles.Render("~/Content/listitems.css")
}

<h2>Products</h2>
@using (Html.BeginForm("All", "Products", FormMethod.Post, new { id = "ProductsForm" }))
{
    @Html.HiddenFor(x => x.Pagination.CurrentPage);
    @Html.HiddenFor(x => x.Pagination.ItemsPerPage);
    @Html.HiddenFor(x => x.Pagination.TotalItems);

    <div class="well">
        <div>
            Producer:
            @Html.DropDownListFor(x => x.ProducerId, Model.Producers, "Select Producer",
         new
         {
             onchange = "document.getElementById('ProductsForm').submit();"
         })
            Order By Price:
            @Html.DropDownListFor(x => x.Value, Model.OrderByPrice,
            new
            {
                onchange = "document.getElementById('ProductsForm').submit();"
            })
            <span class="pull-right">
                Search By Title:
                @Html.TextBoxFor(x => x.SearchString)
                <input type="submit" value="Search" />
            </span>
        </div>
    </div>

    if (Model.Products.Count() == 0)
    {
        <h3>No Products</h3>
    }
    else
    {
        <table class="table  table-striped table-hover">
            <tr>
                <th class=text-center>Picture</th>
                <th class=text-center>Name</th>
                <th class=text-center>Price</th>
                <th class=text-center>Producer</th>
                <th class=text-center>Type</th>
                <th class=text-center>Classification</th>
            </tr>
            @foreach (var item in Model.Products)
            {
                <tr>
                    <td>
                        <img src="@Url.Action("Image", "Products", new { id = item.ImageId })" class="image-container" alt="@item.Name" />
                    </td>
                    <td class="text-center item">@Html.DisplayFor(m => item.Name)</td>
                    <td class="text-center item">@Html.DisplayFor(m => item.Price)</td>
                    <td class="text-center item">@Html.DisplayFor(m => item.Producer)</td>
                    <td class="text-center item">@Html.DisplayFor(m => item.Type)</td>
                    <td class="text-center item">@Html.DisplayFor(m => item.Classification)</td>
                </tr>
            }
        </table>

        <div class="pager">
            @Html.PageLinks(Model.Pagination, x => Url.Action("All",
                        new { page = x,
                            producerId = Model.ProducerId,
                            searchString = Model.SearchString,
                            value = Model.Value
                        }))
        </div>
    }
}


